<% if (user) { %>
  <div class="dropdown">
    <button class="btn d-flex align-items-center dropdown-toggle" type="button"
            id="navbarProfileDropdown" data-bs-toggle="dropdown" aria-expanded="false">
      <img src="<%= user.avatarUrl || '/images/default-avatar.png' %>"
           alt="Avatar" width="36" height="36" class="rounded-circle me-2" />
      <span><%= user.name %></span>
    </button>

    <ul class="dropdown-menu dropdown-menu-end p-2" aria-labelledby="navbarProfileDropdown" style="min-width: 200px;">
      <% (userActions || []).forEach(function(action) {
           const href = action.page.route ? action.page.route : '#';
           const label = action.page.name;
             %>
             <li class="mb-1">
               <a class="btn btn-outline-secondary btn-sm w-100 text-start d-flex align-items-center" href="<%= href %>">
                 <% if (action.icon) { %>
                   <i class="<%= action.icon %> me-2"></i>
                 <% } %>
                 <%= label %>
               </a>
             </li>
      <% }); %>
      <li class="mb-1">
        <form action="/auth/logout" method="post" class="m-0">
          <button type="submit" class="btn btn-outline-danger btn-sm w-100 text-start d-flex align-items-center">
              <i class="bi bi-box-arrow-right me-2"></i>
              Logout
          </button>
        </form>
      </li>
    </ul>
  </div>
<% } else { %>
  <div class="d-flex">
    <a class="btn btn-outline-primary me-2" href="/auth/register">Sign up</a>
    <a class="btn btn-primary" href="/auth/login">Login</a>
  </div>
<% } %>
