<!-- Register Vendor Card -->
<div class="col-12 col-md-6 col-lg-4">
  <div class="card h-100 shadow-sm">
    <div class="card-body d-flex flex-column">
      <div class="d-flex justify-content-between align-items-start">
        <div>
          <h6 class="mb-1">Register Vendor</h6>
          <div class="small text-muted">Create a vendor tied to a user account</div>
        </div>
        <div class="text-muted">
          <i class="bi bi-shop fs-3"></i>
        </div>
      </div>

      <p class="small text-muted mt-3 mb-0">
        Use this form to register a new vendor. The vendor must be associated with an existing user.
      </p>

      <div class="mt-4">
        <button class="btn btn-outline-primary w-100" data-bs-toggle="modal" data-bs-target="#registerVendorModal">
          <i class="bi bi-plus-lg me-2"></i>Register Vendor
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Register Vendor Modal -->
<div class="modal fade" id="registerVendorModal" tabindex="-1" aria-labelledby="registerVendorModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <form id="registerVendorForm" method="POST" action="/admin/vendors/create" class="needs-validation" novalidate>
        <div class="modal-header">
          <h5 class="modal-title" id="registerVendorModalLabel">Register New Vendor</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <div class="modal-body">
          <div class="mb-3">
            <label for="user_id" class="form-label">User</label>
            <select id="user_id" name="user_id" class="form-select" required>
              <option value="">Select user...</option>
              <% if (typeof users !== 'undefined' && Array.isArray(users)) { %>
                <% users.forEach(function(u) { %>
                  <option value="<%= u.id %>"><%= u.email %> - <%= u.name %></option>
                <% }) %>
              <% } else { %>
                <option disabled>No users loaded</option>
              <% } %>
            </select>
            <div class="invalid-feedback">Please select a user for this vendor.</div>
          </div>

          <div class="mb-3">
            <label for="vendor_name" class="form-label">Vendor Name</label>
            <input id="vendor_name" name="name" type="text" class="form-control" placeholder="Vendor name" required>
            <div class="invalid-feedback">Vendor name is required.</div>
          </div>

          <div class="mb-3">
            <label for="location" class="form-label">Location (human readable)</label>
            <input id="location" name="location" type="text" class="form-control" placeholder="City, address or venue">
            <div class="form-text">Optional, but helpful.</div>
          </div>

          <div class="row g-2">
            <div class="col-6">
              <label for="latitude" class="form-label">Latitude</label>
              <input id="latitude" name="latitude" type="number" step="any" class="form-control" placeholder="51.0">
            </div>
            <div class="col-6">
              <label for="longitude" class="form-label">Longitude</label>
              <input id="longitude" name="longitude" type="number" step="any" class="form-control" placeholder="4.0">
            </div>
          </div>

          <div class="form-text mt-2">You can leave lat/lon empty and fill them later.</div>

          <!-- error placeholder -->
          <% if (typeof vendorError !== 'undefined') { %>
            <div class="alert alert-danger mt-3"><%= vendorError %></div>
          <% } %>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button id="submitVendorBtn" type="submit" class="btn btn-primary">Create Vendor</button>
        </div>
      </form>
    </div>
  </div>
</div>
